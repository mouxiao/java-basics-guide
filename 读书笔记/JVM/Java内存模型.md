## java内存模型
  > 通常我们说的java内存模型，一般是指jvm运行数据区域。在jdk1.8之前jvm内存区域主要分为堆，方法区(包含运行时常量)，程序计数器，虚拟机栈，本地方法栈
>其中堆和方法区为线程共享区域，本地方法栈，虚拟机栈，程序计数器为线程私有。jdk1.8之后jvm内存区域主要包括堆(共享线程)，程序计数器(线程私有)，虚拟机栈(线程私有)，
>本地方法栈(线程私有)。jdk1.8之后将方法区(永久代)从jvm中移除，改为使用本地直接内存存储类的元数据信息，并命名为元空间。

jdk1.8之前java内存模型
![avatar](../../picture/jvm/1_8before.jpg)

jdk1.8之后java内存模型
![avatar](../../picture/jvm/1_8after.jpg)

### java内存区域介绍

#### 堆(Heap)
> 堆是java虚拟机管理内存中占用最大的一块，它是所有线程共享的一片区域，随着虚拟机的启动而创建，java堆的主要作用就是存放对象的实例和数组。
>因为java堆主要的作用是存放对象的实例，所以垃圾收集器管理的主要区域就在堆内存区域，因此堆也被称为GC堆。从垃圾回收的角度来说
>，现在的垃圾回收算法都采用分代垃圾回收。所以java堆还可以细分为新生代和老年代，在细分一点：Eden空间,From Survivor,To Survivor空间等。
>划分这么细的目的是为了更好的管理内存区域(分配和回收)。

#### 方法区(Method Area)
> 方法区和堆一样，在java内存模型中，也是线程共享的。方法区主要存储被虚拟机已加载的类信息,变量,静态常量和即时被编译器编译后的代码等数据。
>如果方法区无法满足新的内存分配需求时，则会出现[内存溢出](../../面试准备/java基础/Java异常.md#outOfMemoryError)错误

